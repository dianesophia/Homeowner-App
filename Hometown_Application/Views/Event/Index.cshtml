 @*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>

<style>
    #calendar {
        max-width: 1300px;
        margin: auto;
    }
</style>

<div id="calendar"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'en',
            fixedWeekCount:  true,
            height: 600, 
            contentHeight: 600,
            events: [
                // Load events from your database
                {
                    url: '/Event/GetEvents', // API to get events
                    method: 'GET',
                    failure: function () {
                        alert('Failed to load events');
                    }
                }
            ]
        });

        calendar.render();

        // Fetch public holidays separately and add them manually
        fetch('https://date.nager.at/api/v3/PublicHolidays/2024/PH') 
            .then(response => response.json())
            .then(holidays => {
                holidays.forEach(holiday => {
                    calendar.addEvent({
                        title: holiday.name, 
                        start: holiday.date, 
                        color: 'red' 
                    });
                });
            })
            .catch(error => console.error('Error fetching holidays:', error));
    });
</script>
